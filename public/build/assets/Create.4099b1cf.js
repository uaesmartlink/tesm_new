import{L as j}from"./Layout.2b81e4c7.js";import{g as M}from"./debounce.0c301735.js";import{T as O}from"./TextInput.f0b3d3de.js";import{C as D}from"./CheckboxInput.5cb4646e.js";import{L as R}from"./LoadingButton.bfa8c892.js";import{T as z}from"./TextareaInput.f1c67487.js";import{_ as E,r as n,o as p,c as m,a as t,b as l,e as h,h as v,t as i,w as G,n as L,d as b,F as H,j as J,f as K}from"./app.63b27400.js";import"./Dropdown.64bfb70e.js";import"./FlashMessages.93693c4b.js";import"./InputError.d14d8db7.js";const P={layout:j,remember:"form",props:{iservices:Array},components:{CheckboxInput:D,LoadingButton:R,TextInput:O,TextareaInput:z},metaInfo(){return{title:this.$t("create_x",{x:this.$tc("Measurement Field")})}},data(){return{form:{name:null,type:null,order:null,services:[],required:!1,description:null,options:[{value:""},{value:""}]},services:[],sending:!1,types:["Text","Select","Textarea","Checkbox","Radio"]}},mounted(){this.services=this.iservices},methods:{submit(){this.sending=!0;let e={...this.form,options:[...this.form.options],services:this.form.services.map(r=>r.value)};e.options.pop(),this.$inertia.post(this.route("measurement_fields.store"),e,{onFinish:()=>this.sending=!1})},selectAllServices(){this.form.services=[],this.services.map(e=>{this.form.services.push(e)}),this.$refs.desc.focus()},deselectAllServices(){this.form.services=[],this.$refs.desc.focus()},optionChanged(e,r){this.form.options=this.form.options.map((c,d)=>r==d?e:c)},checkOptions(e){const r=this.form.options.length;e==r&&this.form.options.push({value:""})},searchServices(e,r){e&&(r(!0),this.searchingServices(r,e,this))},searchingServices:M((e,r,c)=>{fetch(c.route("ajax.services")+"?search="+escape(r)).then(d=>{d.json().then(s=>c.services=s),e(!1)})},350)}},Q={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},W=t("span",{class:"text-gray-400 font-medium mx-2"},"/",-1),X={class:"bg-white rounded shadow overflow-hidden max-w-3xl"},Y={class:"p-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},Z={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},ee={class:"form-label",for:"type"},re={key:0,class:"form-error"},se={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},oe={class:"form-label",for:"services"},te={key:0,class:"form-error"},le={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-end items-center"};function ie(e,r,c,d,s,a){var y,k,V,w,S,_,$,C,x,T,F;const I=n("Icons"),q=n("Link"),f=n("text-input"),g=n("v-select"),A=n("textarea-input"),B=n("checkbox-input"),N=n("loading-button");return p(),m("div",null,[t("h1",Q,[l(q,{class:"text-gray-600 hover:text-gray-800 inline-flex items-center",href:e.route("measurement_fields")},{default:h(()=>[l(I,{name:"back",class:"flex-shrink-0 w-3 h-3 md:w-5 md:h-5 fill-current ltr:mr-2 rtl:ml-2 rtl:rotate"}),v(" "+i(e.$tc("Measurement Field",2)),1)]),_:1},8,["href"]),W,v(" "+i(e.$t("Create")),1)]),t("div",X,[t("form",{onSubmit:r[8]||(r[8]=G((...o)=>a.submit&&a.submit(...o),["prevent"])),autocomplete:"off"},[t("div",Y,[l(f,{label:e.$t("Name"),modelValue:s.form.name,"onUpdate:modelValue":r[0]||(r[0]=o=>s.form.name=o),errors:(y=e.$page.props.errors)==null?void 0:y.name,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["label","modelValue","errors"]),l(f,{type:"number",modelValue:s.form.order,"onUpdate:modelValue":r[1]||(r[1]=o=>s.form.order=o),label:e.$tc("Order"),errors:(k=e.$page.props.errors)==null?void 0:k.order,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["modelValue","label","errors"]),t("div",Z,[t("label",ee,i(e.$tc("Type")),1),l(g,{dir:e.$page.props.user.account.direction,transition:"","input-id":"type",options:s.types,filterable:!1,searchable:!1,modelValue:s.form.type,"onUpdate:modelValue":r[2]||(r[2]=o=>s.form.type=o),placeholder:e.$t("select_x",{x:e.$t("Type")}),class:L({error:((V=e.$page.props.errors)==null?void 0:V.type)&&((w=e.$page.props.errors)==null?void 0:w.type.length)})},null,8,["dir","options","modelValue","placeholder","class"]),(S=e.$page.props.errors)!=null&&S.type?(p(),m("div",re,i((_=e.$page.props.errors)==null?void 0:_.type[0]),1)):b("",!0)]),s.form.type=="Select"||s.form.type=="Radio"||s.form.type=="Checkbox"?(p(!0),m(H,{key:0},J(s.form.options,(o,u)=>(p(),K(f,{key:"opt_"+u,modelValue:o.value,"onUpdate:modelValue":U=>o.value=U,onFocus:U=>a.checkOptions(u+1),label:"Option "+(u+1),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full",errors:e.$page.props.errors["options."+u+".value"]},null,8,["modelValue","onUpdate:modelValue","onFocus","label","errors"]))),128)):b("",!0),t("div",se,[t("label",oe,i(e.$tc("Service")),1),l(g,{multiple:"",transition:"",options:s.services,"input-id":"services",modelValue:s.form.services,"onUpdate:modelValue":r[5]||(r[5]=o=>s.form.services=o),onSearch:a.searchServices,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Service",2)}),class:L({error:(($=e.$page.props.errors)==null?void 0:$.services)&&((C=e.$page.props.errors)==null?void 0:C.services.length)})},{"list-footer":h(()=>[s.services.length==s.form.services.length?(p(),m("li",{key:0,role:"option",onClick:r[3]||(r[3]=o=>a.deselectAllServices()),class:"vs__dropdown-option bg-gray-300 hover:bg-gray-400"},i(e.$t("Deselect all above")),1)):(p(),m("li",{key:1,role:"option",onClick:r[4]||(r[4]=o=>a.selectAllServices()),class:"vs__dropdown-option bg-gray-300 hover:bg-gray-400"},i(e.$t("Select all above")),1))]),_:1},8,["options","modelValue","onSearch","dir","placeholder","class"]),(x=e.$page.props.errors)!=null&&x.services?(p(),m("div",te,i((T=e.$page.props.errors)==null?void 0:T.services[0]),1)):b("",!0)]),l(A,{ref:"desc",label:e.$t("Description"),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full",modelValue:s.form.description,"onUpdate:modelValue":r[6]||(r[6]=o=>s.form.description=o),errors:(F=e.$page.props.errors)==null?void 0:F.description},null,8,["label","modelValue","errors"]),l(B,{class:"mb-8",id:"required",checked:s.form.required,"onUpdate:checked":r[7]||(r[7]=o=>s.form.required=o),label:e.$t("This field is required")},null,8,["checked","label"])]),t("div",le,[l(N,{loading:s.sending,class:"btn-gray",type:"submit"},{default:h(()=>[v(i(e.$t("create_x",{x:e.$tc("Measurement Field")})),1)]),_:1},8,["loading"])])],32)])])}const be=E(P,[["render",ie]]);export{be as default};
