import{g as R}from"./debounce.39c62db7.js";import{T as G}from"./TextInput.f617a18b.js";import{R as H}from"./RadioInput.87eebdbb.js";import{S as Q}from"./SelectInput.e9de2a24.js";import{T as W}from"./TextareaInput.11f05798.js";import{C as X}from"./CheckboxInput.cc0c3787.js";import{L as Y}from"./LoadingButton.a339d3f2.js";import{D as Z}from"./DeleteRestoreComponent.68586ca4.js";import{_ as ee,r as h,o as i,c as a,a as l,t as n,d as c,n as b,w as se,b as f,m as A,D as O,F as _,j as g,e as J,f as k,h as re}from"./app.cde781e3.js";import"./InputError.99a90f53.js";import"./Dialog.43e3e449.js";import"./Modal.7e04ee0b.js";const te={components:{CheckboxInput:X,LoadingButton:Y,RadioInput:H,SelectInput:Q,TextInput:G,TextareaInput:W,DeleteRestoreComponent:Z},props:{data:Object,ddData:{type:Object},modal:Boolean,action:Function,iservices:Array,icustomers:Array},data(){return{form:{name:null,service_id:null,customer_id:null,measurement:null,extra_attributes:[]},fields:null,services:[],customers:[],service:null,customer:null,loading:!1,sending:!1}},watch:{ddData:function(e){e&&(e.name&&(this.form.name=e.name),e.service&&(this.service=e.service,this.services.push(this.service),this.form.service_id=this.service.value,this.service.measurement_fields.map(s=>{s.type=="Checkbox"?(this.form[s.name]={},s.options.map(o=>this.form[s.name][o.value]=!1)):this.form[s.name]=null})),e.customer&&(this.customer=e.customer,this.customers=[this.customer],this.form.customer_id=this.customer.value))},customer:function(e,s){this.form.customer_id=e?e.value:null,(!this.form.name||this.service&&this.form.name==this.service.label||this.form.name==(s?s.label+"'s ":"")+(this.service?this.service.label:""))&&(this.form.name=(e?e.label:"")+(this.service?"'s "+this.service.label:""))},service:function(e,s){this.form.service_id=e?e.value:null,(!this.form.name||this.customer&&this.form.name==this.customer.label||this.form.name==(this.customer?this.customer.label+"'s ":"")+(s?s.label:""))&&(this.form.name=(this.customer?this.customer.label+"'s ":"")+(e?e.label:"")),s&&s.measurement_fields.map(o=>{delete this.form[o.name]}),e&&e.measurement_fields.map(o=>{o.type=="Checkbox"?(this.form[o.name]={},o.options.map(p=>this.form[o.name][p.value]=!1)):this.form[o.name]=null})}},created(){this.services=this.iservices,this.customers=this.icustomers,this.data&&(this.form=this.data),this.ddData&&(this.ddData.name&&(this.form.name=this.ddData.name),this.ddData.service&&(this.service=this.ddData.service,this.services.push(this.service),this.form.service_id=this.service.value,this.service.measurement_fields.map(e=>{e.type=="Checkbox"?(this.form[e.name]={},e.options.map(s=>this.form[e.name][s.value]=!1)):this.form[e.name]=null})),this.ddData.customer&&(this.customer=this.ddData.customer,this.customers=[this.customer],this.form.customer_id=this.customer.value))},methods:{submit(){this.sending=!0;let e={...this.form};if(this.service&&this.service.measurement_fields&&this.service.measurement_fields.length>0){let s=[];this.service.measurement_fields.map((o,p)=>{delete e[o.name];let t={};t[o.name]=o.type=="Checkbox"?JSON.stringify(this.form[o.name]):this.form[o.name],s[p]={...t}}),e.extra_attributes=[...s]}this.modal?(e.ajax=!0,this.$axios.post(this.route("measurements.store"),e).then(s=>{this.sending=!1,this.action(s.data),this.errors={},this.$emit("close")}).catch(s=>{this.sending=!1,s.response.data.errors&&(this.errors=s.response.data.errors)})):this.$inertia.post(this.route("measurements.store"),e,{onFinish:()=>this.sending=!1})},updateFormValue(e,s,o){o?this.form[s][o]=e:this.form[s]=e},searchCustomers(e,s){e&&(s(!0),this.searchingCustomers(s,e,this))},searchingCustomers:R((e,s,o)=>{fetch(o.route("ajax.customers")+"?search="+escape(s)).then(p=>{p.json().then(t=>o.customers=t),e(!1)})},350),searchServices(e,s){e&&(s(!0),this.searchingServices(s,e,this))},searchingServices:R((e,s,o)=>{fetch(o.route("ajax.services")+"?with_fields=1&search="+escape(s)).then(p=>{p.json().then(t=>o.services=t),e(!1)})},350)}},oe={class:"w-full ltr:text-left rtl:text-right"},le={key:0,class:"w-full flex items-start justify-between border-b"},ie={class:"font-bold flex-1 mb-4"},ae={class:"flex items-center"},ne=l("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[l("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),me=[ne],ue={class:"px-8 py-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},pe={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ce={class:"form-label",for:"customer_id"},de={key:0,class:"form-error"},he={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},fe={class:"form-label",for:"service_id"},ve={key:0,class:"form-error"},be={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},_e={class:"form-label",for:"price"},ge={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ye={class:"form-label",for:"appointment"},ke={class:"mb-8 ltr:mr-6 rtl:ml-6 flex flex-wrap"},we={class:"form-label",for:"name"},Ve=["placeholder"],Ce={class:"text-sm mt-1"},Se={key:0,class:"form-error"},xe={key:0,class:"ltr:pr-6 rtl:pl-6 ltr:-mr-12 rtl:-ml-12 w-full"},$e={class:"font-bold mb-2"},Ue=l("hr",{class:"mb-8"},null,-1),je={class:"ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 col-span-full grid grid-cols-1 sm:grid-cols-2"},Te=["value"],Be=l("div",{class:"py-2"},null,-1),De={key:0,class:"form-error"},Fe=l("div",{class:"py-2"},null,-1),Ie={key:0,class:"form-error"};function Me(e,s,o,p,t,v){var S,x,$,U,j,T,B,D,F,I,M,N,z,L;const w=h("v-select"),V=h("text-input"),P=h("select-input"),C=h("textarea-input"),E=h("checkbox-input"),K=h("radio-input"),q=h("loading-button");return i(),a("div",oe,[l("div",{class:b(o.modal?"np flex flex-col justify-between items-center px-6 py-4 mb-4 bg-gray-100 border-b rounded-t":"")},[o.modal?(i(),a("div",le,[l("p",ie,n(e.$t("add_x",{x:e.$tc("Measurement")})),1),l("div",ae,[l("a",{class:"modal-close cursor-pointer z-50",onClick:s[0]||(s[0]=r=>e.$emit("close"))},me)])])):c("",!0),l("div",{class:b(o.modal?"print bg-white -mx-6 -mb-8 rounded-md":"")},[l("form",{onSubmit:s[7]||(s[7]=se((...r)=>v.submit&&v.submit(...r),["prevent"])),autocomplete:"off"},[l("div",ue,[l("div",pe,[l("label",ce,n(e.$tc("Customer")),1),f(w,{modelValue:t.customer,"onUpdate:modelValue":s[1]||(s[1]=r=>t.customer=r),options:t.customers,"input-id":"customer_id",onSearch:v.searchCustomers,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Customer",2)}),class:b({error:((S=e.$page.props.errors)==null?void 0:S.customer_id)&&((x=e.$page.props.errors)==null?void 0:x.customer_id.length)})},null,8,["modelValue","options","onSearch","dir","placeholder","class"]),($=e.$page.props.errors)!=null&&$.customer_id?(i(),a("div",de,n((U=e.$page.props.errors)==null?void 0:U.customer_id[0]),1)):c("",!0)]),l("div",he,[l("label",fe,n(e.$tc("Service")),1),f(w,{modelValue:t.service,"onUpdate:modelValue":s[2]||(s[2]=r=>t.service=r),options:t.services,"input-id":"service_id",onSearch:v.searchServices,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Service",2)}),class:b({error:((j=e.$page.props.errors)==null?void 0:j.service_id)&&((T=e.$page.props.errors)==null?void 0:T.service_id.length)})},null,8,["modelValue","options","onSearch","dir","placeholder","class"]),(B=e.$page.props.errors)!=null&&B.service_id?(i(),a("div",ve,n((D=e.$page.props.errors)==null?void 0:D.service_id[0]),1)):c("",!0)]),l("div",be,[l("label",_e,n(e.$tc("Price")),1),f(V,{type:"number",modelValue:t.form.price,"onUpdate:modelValue":s[3]||(s[3]=r=>t.form.price=r)},null,8,["modelValue"])]),l("div",ge,[l("label",ye,n(e.$tc("Appointment Time")),1),A(l("input",{type:"datetime-local",name:"appointment","onUpdate:modelValue":s[4]||(s[4]=r=>t.form.appointment=r)},null,512),[[O,t.form.appointment]])]),l("div",ke,[l("label",we,n(e.$t("Type Name")),1),A(l("input",{id:"name",type:"text","onUpdate:modelValue":s[5]||(s[5]=r=>t.form.name=r),placeholder:e.$t("Type Name"),class:b(["form-input block w-full mt-1 rounded-md border border-gray-300 shadow-sm focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",{error:((F=e.$page.props.errors)==null?void 0:F.name)&&((I=e.$page.props.errors)==null?void 0:I.name.length)}])},null,10,Ve),[[O,t.form.name]]),l("div",null,[l("div",Ce,n(e.$t("Person name with services name i.e, John's Son Blazer, Mike Kurta or Shalini Blouse etc")),1),((M=e.$page.props.errors)==null?void 0:M.name)&&((N=e.$page.props.errors)==null?void 0:N.name.length)?(i(),a("div",Se,n((z=e.$page.props.errors)==null?void 0:z.name[0]),1)):c("",!0)])]),t.service&&t.service.measurement_fields&&t.service.measurement_fields.length?(i(),a("div",xe,[l("h1",$e,n(e.$tc("Measurement Field",2)),1),Ue,l("div",je,[(i(!0),a(_,null,g(t.service.measurement_fields,(r,u)=>(i(),a(_,null,[r.type=="Text"?(i(),a("div",{key:"in_"+u},[f(V,{label:r.name,modelValue:t.form[r.name],"onUpdate:modelValue":m=>t.form[r.name]=m,errors:e.$page.props.errors[r.name],class:"ltr:pr-6 rtl:pl-6 pb-8"},null,8,["label","modelValue","onUpdate:modelValue","errors"])])):r.type=="Select"?(i(),a("div",{key:"in_"+u},[f(P,{label:r.name,modelValue:t.form[r.name],"onUpdate:modelValue":m=>t.form[r.name]=m,errors:e.$page.props.errors[r.name],class:"ltr:pr-6 rtl:pl-6"},{default:J(()=>[(i(!0),a(_,null,g(r.options,(m,d)=>(i(),a("option",{key:"o_"+d,value:m.value},n(m.value),9,Te))),128))]),_:2},1032,["label","modelValue","onUpdate:modelValue","errors"])])):r.type=="Textarea"?(i(),a("div",{key:"in_"+u,class:"col-span-full"},[(i(),k(C,{label:r.name,key:"in_"+u,modelValue:t.form[r.name],"onUpdate:modelValue":m=>t.form[r.name]=m,errors:e.$page.props.errors[r.name],class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["label","modelValue","onUpdate:modelValue","errors"]))])):r.type=="Checkbox"?(i(),a("div",{key:"in_"+u},[(i(),a("div",{class:"ltr:text-left rtl:text-right ltr:pr-6 rtl:pl-6 mb-8",key:"in_"+u},[(i(),a("label",{class:"form-label mr-6",key:"in_"+u},n(r.name),1)),Be,(i(!0),a(_,null,g(r.options,(m,d)=>(i(),k(E,{label:m.value,class:"mb-2 w-full",id:"cb_"+d+"_"+u,key:"cb_"+d+"_"+u,errors:e.$page.props.errors[r.name],value:t.form[r.name][m.value],onInput:y=>v.updateFormValue(y,r.name,m.value)},null,8,["label","id","errors","value","onInput"]))),128)),e.$page.props.errors[r.name]&&e.$page.props.errors[r.name].length?(i(),a("div",De,n(e.$page.props.errors[r.name][0]),1)):c("",!0)]))])):r.type=="Radio"?(i(),a("div",{key:"in_"+u},[(i(),a("div",{class:"ltr:text-left rtl:text-right ltr:pr-6 rtl:pl-6 mb-8",key:"in_"+u},[(i(),a("label",{class:"form-label mr-6",key:"in_"+u},n(r.name),1)),Fe,(i(!0),a(_,null,g(r.options,(m,d)=>(i(),k(K,{name:r.name,label:m.value,value:m.value,class:"mb-2 w-full mr-6",id:"r_"+d+"_"+u,key:"r_"+d+"_"+u,errors:e.$page.props.errors[r.name],onInput:y=>v.updateFormValue(y,r.name)},null,8,["name","label","value","id","errors","onInput"]))),128)),e.$page.props.errors[r.name]&&e.$page.props.errors[r.name].length?(i(),a("div",Ie,n(e.$page.props.errors[r.name][0]),1)):c("",!0)]))])):c("",!0)],64))),256))])])):c("",!0),f(C,{high:"",resize:!o.modal,label:e.$t("Description"),modelValue:t.form.measurement,"onUpdate:modelValue":s[6]||(s[6]=r=>t.form.measurement=r),errors:(L=e.$page.props.errors)==null?void 0:L.measurement,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["resize","label","modelValue","errors"])]),l("div",{class:b([o.modal?"rounded-b":"","px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-end items-center"])},[f(q,{type:"submit",class:"btn-gray",loading:t.sending,disabled:t.loading||t.sending},{default:J(()=>[re(n(e.$t("create_x",{x:e.$tc("Measurement")})),1)]),_:1},8,["loading","disabled"])],2)],32)],2)],2)])}const He=ee(te,[["render",Me]]);export{He as default};
