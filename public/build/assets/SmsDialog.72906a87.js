import{L as v}from"./LoadingButton.bfa8c892.js";import{T as k}from"./TextareaInput.f1c67487.js";import{_ as S,r as x,o as s,c as o,a as n,t as r,d as i,b as m,e as y,h as f,F as C}from"./app.63b27400.js";const M={components:{TextareaInput:k,LoadingButton:v},props:{order:Object,measurement:Object},data(){return{data:null,text:null,sending:!1,sent:!1,errors:{},error:null}},methods:{sendOrder(){this.errors={},this.error=null,this.sending=!0,this.sending=!0,this.$axios.post(this.route("customers.sms",this.order.id),{text:this.text}).then(e=>{this.sending=!1,this.sent=e.data.success,e.data.success?this.$emit("close"):this.error=e.data.error}).catch(e=>{this.sending=!1,console.log(e.response),this.errors=e.response.data.errors})},sendMeasurement(){console.log(this.measurement.id),console.log(this.measurement.appointment),console.log(this.measurement.customer),this.errors={},this.error=null,this.sending=!0,this.$axios.post(this.route("customers.sms.measurement",this.measurement.id),{text:this.text}).then(e=>{this.sending=!1,this.sent=e.data.success,e.data.success?this.$emit("close"):this.error=e.data.error}).catch(e=>{this.sending=!1,console.log(e.response),this.errors=e.response.data.errors})}}},w={key:0,class:"w-full -my-6"},V={class:"w-full bg-white rounded shadow-lg leading-normal p-4"},T={class:"font-bold"},L=["innerHTML"],j={key:0,class:"text-green-500 mb-4"},B={key:1},H={key:0,class:"text-red-500 mb-4"},N={key:1,class:"text-red-500 mb-4"},O={class:"-m-4 px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center rounded-b"},z={key:0,class:"btn-spinner ltr:mr-2 rtl:ml-2"},D={key:1,class:"w-full -my-6"},F={class:"w-full bg-white rounded shadow-lg leading-normal p-4"},U={class:"font-bold"},E=["innerHTML"],I={key:0,class:"text-green-500 mb-4"},q={key:1},A={key:0,class:"text-red-500 mb-4"},G={key:1,class:"text-red-500 mb-4"},J={class:"-m-4 px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center rounded-b"},K={key:0,class:"btn-spinner ltr:mr-2 rtl:ml-2"};function P(e,l,a,Q,t,u){var g,p,b,_;const c=x("textarea-input"),h=x("loading-button");return s(),o(C,null,[a.order?(s(),o("div",w,[n("div",V,[n("h4",T,r(e.$t("Send SMS to Customer")),1),n("h4",{class:"text-sm mt-2 mb-4",innerHTML:e.$t("sending_to_html",{name:a.order.customer.name,phone:a.order.customer.phone})},null,8,L),t.sent?(s(),o("div",j,r(e.$t("SMS has been successfully sent to customer.")),1)):(s(),o("div",B,[t.error?(s(),o("div",H,r(t.error),1)):i("",!0),(g=t.errors)!=null&&g.text?(s(),o("div",N,r(t.errors.text.join(", ")),1)):i("",!0)])),m(c,{modelValue:t.text,"onUpdate:modelValue":l[0]||(l[0]=d=>t.text=d),resize:!1,errors:(p=t.errors)==null?void 0:p.text,class:"pb-10 w-full",label:"SMS Text"},null,8,["modelValue","errors"]),n("div",O,[n("button",{class:"text-gray-700 hover:text-gray-800",type:"button",onClick:l[1]||(l[1]=d=>e.$emit("close"))},r(e.$t("Cancel")),1),m(h,{type:"button",onClick:u.sendOrder,loading:t.sending,class:"btn-gray px-4 py-2 ml-auto flex items-center"},{default:y(()=>[t.sending?(s(),o("div",z)):i("",!0),f(" "+r(e.$t("Send")),1)]),_:1},8,["onClick","loading"])])])])):i("",!0),a.measurement?(s(),o("div",D,[n("div",F,[n("h4",U,r(e.$t("Send SMS to Customer")),1),n("h4",{class:"text-sm mt-2 mb-4",innerHTML:e.$t("sending_to_html",{name:this.measurement.customer.name,phone:this.measurement.customer.phone})},null,8,E),t.sent?(s(),o("div",I,r(e.$t("SMS has been successfully sent to customer.")),1)):(s(),o("div",q,[t.error?(s(),o("div",A,r(t.error),1)):i("",!0),(b=t.errors)!=null&&b.text?(s(),o("div",G,r(t.errors.text.join(", ")),1)):i("",!0)])),m(c,{modelValue:t.text,"onUpdate:modelValue":l[2]||(l[2]=d=>t.text=d),resize:!1,errors:(_=t.errors)==null?void 0:_.text,class:"pb-10 w-full",label:"SMS Text"},null,8,["modelValue","errors"]),n("div",J,[n("button",{class:"text-gray-700 hover:text-gray-800",type:"button",onClick:l[3]||(l[3]=d=>e.$emit("close"))},r(e.$t("Cancel")),1),m(h,{type:"button",onClick:u.sendMeasurement,loading:t.sending,class:"btn-gray px-4 py-2 ml-auto flex items-center"},{default:y(()=>[t.sending?(s(),o("div",K)):i("",!0),f(" "+r(e.$t("Send")),1)]),_:1},8,["onClick","loading"])])])])):i("",!0)],64)}const Y=S(M,[["render",P]]);export{Y as S};
