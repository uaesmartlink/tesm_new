import{L as y,D as x}from"./Dropdown.b07b451d.js";import{S as b}from"./SmsDialog.b05a7a99.js";import{_ as v,r as g,o as l,c as i,a as e,t as n,b as u,d as a,f as w,h as _}from"./app.7ae5e658.js";import"./LoadingButton.917017b5.js";import"./TextareaInput.21f16da5.js";import"./InputError.bfe7341e.js";const k={components:{Logo:y,Dropdown:x,SmsDialog:b},props:{measurement:Object,modal:{default:!0},notify:{type:Boolean,default:!1}},metaInfo(){return{title:this.$t("Measurement Number",{x:this.measurement.id}),sending:!1,confirm:!1,send_sms:!1,emailing:!1,message:null,dialogButtonText:null,dialogAction:null,dialogTitle:null,dialogBody:null}},methods:{printMeasurement(){window.print()},editMeasurement(){this.$inertia.visit(this.route("measurements.edit",this.measurement.id)),this.$emit("close")},smsToCustomer(){this.sending=!0,console.log("Hello"),this.send_sms=!0,console.log(this.send_sms),console.log(this.measurement.customer),this.$axios.post(this.route("customers.sms.measurement",this.measurement.id)).then(s=>{this.sending=!1,this.sent=s.data.success,s.data.success?this.$emit("close"):this.error=s.data.error}).catch(s=>{this.sending=!1,console.log(s.response),this.errors=s.response.data.errors})},displayExtra(s){let o="";return Array.isArray(s)&&s.map((t,f)=>{for(let[h,r]of Object.entries(t)){if(o+="</tr>",r.includes("{")&&r.includes("}")&&r.includes(":")){o+=`<td class="w-32 border-b px-4 py-2"><strong>${h}</strong>:</td><td class="border-b px-4 py-2">`;const d=JSON.parse(r);for(let[p,m]of Object.entries(d))m&&(o+=p+" ");o+="</td>"}else o+=`<td class="w-32 border-b px-4 py-2"><strong>${h}</strong>:</td><td class="border-b px-4 py-2">${r}</td> `;o+="</tr>"}}),o},emailOrder(s){this.sending=!0,this.emailing=!0,this.$axios.post(this.route("measurements.email",s)).then(o=>{this.sending=!1,this.emailing=!1,this.message=o.data.message||this.$t("System is unable to sent email, either customer do not have email or system settings are not correct.")}).catch(o=>{this.sending=!1,this.emailing=!1,this.message=o.response.data.message||this.$t("Request has been failed, please check the logs in storage folder and contact developer.")})},hide(){this.$emit("close")}}},$={key:0,class:"w-full ltr:text-left rtl:text-right"},C={key:0,class:"np flex justify-between items-center px-6 py-4 mb-4 bg-gray-100 border-b rounded-t"},B={class:"font-bold"},D={class:"flex items-center"},M=e("svg",{class:"fill-current text-black",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),N=[M],S={class:"print"},T={class:"max-w-2xl h-full py-4 px-6 leading-normal"},j={class:"flex flex-wrap xs:flex-no-wrap justify-around w-full items-start"},A={class:"text-gray-900 mx-auto xs:mx-0",style:{width:"180px"}},L=["alt","src"],O={class:"text-sm px-4 py-4 xs:py-0 text-center xs:text-left"},V={class:"font-extrabold"},E={class:"font-bold"},I={class:"text-sm"},P={class:"flex"},q=e("span",{class:"text-right ltr:mr-2 rtl:ml-2",style:{width:"90px"}},"No:",-1),z={class:"font-bold"},H={class:"flex"},J=e("span",{class:"text-right ltr:mr-2 rtl:ml-2",style:{width:"90px"}},"Date:",-1),R={class:"font-bold"},F={class:"inline-block"},G={id:"customer",class:"mt-6 w-full"},K={class:"px-2 py-2 border rounded-t font-bold"},Q={class:"border rounded-b border-t-0 px-2 py-2"},U={class:"flex"},W={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},X={key:0,class:"flex"},Y={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},Z={class:"flex"},ee={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},se={key:1,class:"flex"},te={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},ne={id:"measurement",class:"mt-6 w-full"},oe={class:"px-2 py-2 border rounded-t font-bold"},le={class:"border rounded-b border-t-0 px-2 py-2"},ie={class:"flex"},ae={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},re={key:0,class:"flex"},de={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},me={key:1,class:"flex"},ce={class:"text-right ltr:mr-2 rtl:ml-2",style:{"min-width":"70px"}},ue={key:0,class:"pt-6"},he={class:"font-bold"},pe={key:1,class:"np block xs:flex items-end justify-between px-6 py-4 mt-4 bg-gray-100 border-t rounded-b"},ge={class:"m-1 xs:m-0"},_e=["disabled"],fe={key:0,class:"btn-spinner dark ltr:mr-2 rtl:ml-2"},ye={key:1,style:{color:"green"}};function xe(s,o,t,f,h,r){const d=g("Icons"),p=g("logo"),m=g("Dialog");return t.measurement&&t.measurement.id?(l(),i("div",$,[t.modal?(l(),i("div",C,[e("p",B,n(s.$t("Measurement No",{x:t.measurement.id})),1),e("div",D,[e("a",{class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800",onClick:o[0]||(o[0]=c=>r.editMeasurement(t.measurement.id))},[u(d,{name:"pencil",class:"h-5 w-5 fill-current"})]),e("a",{class:"modal-close mx-2 cursor-pointer text-gray-700 hover:text-gray-800",onClick:o[1]||(o[1]=c=>r.printMeasurement())},[u(d,{name:"printer",class:"h-5 w-5 fill-current"})]),e("a",{class:"modal-close ml-2 cursor-pointer",onClick:o[2]||(o[2]=c=>s.$emit("close"))},N)])])):a("",!0),e("div",S,[e("div",T,[e("div",j,[e("div",A,[s.$page.props.user.account.logo_path?(l(),i("img",{key:0,alt:s.$page.props.user.account.name,src:s.$page.props.user.account.logo_path},null,8,L)):(l(),w(p,{key:1}))]),e("div",O,[e("div",V,n(t.measurement.account.name),1),e("div",E,n(t.measurement.account.phone),1),_(" "+n(t.measurement.account.email),1)]),e("div",I,[e("div",P,[q,e("span",z,n(t.measurement.id),1)]),e("div",H,[J,e("span",R,[e("span",F,n(t.measurement.appointment),1)])])])]),e("div",G,[e("div",K,n(s.$t("Customer Details")),1),e("div",Q,[e("div",U,[e("span",W,n(s.$t("Name"))+":",1),e("span",null,[e("strong",null,n(t.measurement.customer.name),1)])]),t.measurement.customer.address?(l(),i("div",X,[e("span",Y,n(s.$t("Address"))+":",1),e("span",null,n(t.measurement.customer.address),1)])):a("",!0),e("div",Z,[e("span",ee,n(s.$t("Phone"))+":",1),e("span",null,n(t.measurement.customer.phone),1)]),t.measurement.customer.email?(l(),i("div",se,[e("span",te,n(s.$t("Email"))+":",1),e("span",null,n(t.measurement.customer.email),1)])):a("",!0)])]),e("div",ne,[e("div",oe,n(s.$t("Measurement Details")),1),e("div",le,[e("div",ie,[e("span",ae,n(s.$t("Name"))+":",1),e("span",null,[e("strong",null,n(t.measurement.name),1)])]),t.measurement.appointment?(l(),i("div",re,[e("span",de,n(s.$t("Appointment Time"))+":",1),e("span",null,n(t.measurement.appointment),1)])):a("",!0),t.measurement.price?(l(),i("div",me,[e("span",ce,n(s.$t("Price"))+":",1),e("span",null,n(t.measurement.price),1)])):a("",!0)])]),t.measurement.measurement?(l(),i("div",ue,[e("h4",he,n(s.$t("Description")),1),e("p",null,n(t.measurement.measurement),1)])):a("",!0)])]),t.modal?(l(),i("div",pe,[e("div",ge,[s.$page.props.user.account.sms_enabled&&(s.$page.props.user.can_sms||s.$page.props.user.owner)?(l(),i("button",{key:0,disabled:s.sending,onClick:o[3]||(o[3]=c=>r.smsToCustomer()),class:"inline-flex items-center mt-1 px-4 py-3 text-sm rounded bg-gray-200 hover:bg-gray-400 border ltr:mr-2 rtl:ml-2"},[s.sending?(l(),i("div",fe)):a("",!0),_(" "+n(s.$t("SMS")),1)],8,_e)):a("",!0),s.send_sms?(l(),i("div",ye," Sms has been sent successfully ")):a("",!0)]),e("button",{onClick:o[4]||(o[4]=c=>r.hide()),class:"btn-gray"},n(s.$t("Close")),1)])):a("",!0),u(m,{show:s.message,content:s.message,close:()=>s.message=null},null,8,["show","content","close"]),u(m,{show:s.confirm,close:()=>s.confirm=!1,"action-text":s.dialogButtonText,action:s.dialogAction,title:s.dialogTitle,content:s.dialogBody},null,8,["show","close","action-text","action","title","content"])])):a("",!0)}const Be=v(k,[["render",xe]]);export{Be as default};
